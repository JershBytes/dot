- name: Privileged Setup
  hosts: localhost
  vars:
    remote_regular_user: "{{ ansible_user }}"
  become: true
  connection: localhost
  gather_facts: true

  tasks: 
    - name: Install packages from AUR
      community.general.pacman:
        name: 
          - vscodium-bin 
          - terraform-bin
          - neovim-git
          - docker-git
          - goxlr-utility
          - goxlr-utility-ui
        state: present
        update_cache: true

- name: Non-Privileged Setup
  hosts: localhost
  vars:
    remote_regular_user: "{{ ansible_user }}"
  become: false
  connection: localhost
  gather_facts: true

  tasks:
    - name: Install Brew packages
      community.general.homebrew:
        name:
          - ripgrep
          - fd
          - zig
          - neovim
          - lazygit
          - oh-my-posh
          - lolcat
          - fortune
          - cowsay
          - yazi
          - fzf
          - zoxide
          - neovide
        state: present

    - name: Install Flatpak packages
      community.general.flatpak:
        name:
          - tv.plex.PlexDesktop
          - dev.aunetx.deezer
          - com.bitwarden.desktop
          - dev.vencord.Vesktop
          - org.kde.haruna
        state: present

